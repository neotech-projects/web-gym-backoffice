import{d as N,e as Y,g as X,j as q,k as K,n as j}from"./chunk-MOLSLK7Y.js";import{E as G,N as o,O as a,P as b,R as k,U as l,a as T,aa as F,b as A,h as x,i as w,k as D,ka as R,la as V,n as O,q as H,ra as U,s as $}from"./chunk-GFW33JLT.js";var I=class C{constructor(e){this.http=e}API_URL="/api/bookings";MOCK_URL="/assets/mock/bookings.json";serverAvailable=!0;lastCheck=0;CHECK_INTERVAL=6e4;isServerAvailable(){let e=Date.now();return e-this.lastCheck>this.CHECK_INTERVAL&&(this.lastCheck=e),this.serverAvailable}handleConnectionError(e,t){let n=e.status===0,r=e.message?.includes("parsing")||e.error instanceof ProgressEvent;return n||r?(this.serverAvailable=!1,(this.lastCheck===0||Date.now()-this.lastCheck>this.CHECK_INTERVAL)&&(console.info("Microservizio prenotazioni non disponibile, uso dati mock locali"),this.lastCheck=Date.now()),t()):e.status&&e.status>=400?(this.serverAvailable=!1,(this.lastCheck===0||Date.now()-this.lastCheck>this.CHECK_INTERVAL)&&(console.info("Microservizio prenotazioni non disponibile, uso dati mock locali"),this.lastCheck=Date.now()),t()):(console.warn("Errore nella chiamata al microservizio prenotazioni:",e.message),this.serverAvailable=!1,t())}getBookings(){return this.http.get(this.API_URL).pipe(w(e=>{if(e.success&&e.data){this.serverAvailable=!0;let t=e.data.bookings||[],n=t.map(r=>({id:r.id,user:"Utente",start:r.start,end:r.end}));return{bookings:t,allBookings:n}}throw new Error(e.message||"Invalid response format")}),D(e=>this.getMockBookings().pipe(w(t=>{let n=t.bookings||[],r=n.map(d=>({id:d.id,user:"Utente",start:d.start,end:d.end}));return{bookings:n,allBookings:r}}))))}getBookingsByDate(e){let t=()=>this.getMockBookings().pipe(w(r=>{let d=r.bookings.filter(s=>s.start.split("T")[0]===e),i=r.allBookings.filter(s=>s.start.split("T")[0]===e);return d.map(s=>{let c=i.find(u=>u.id===s.id);return c?A(T({},s),{user:c.user,extendedProps:A(T({},s.extendedProps),{user:c.user})}):s}).filter(s=>s.start?s.start.split("T")[0]===e:!1).filter(s=>s.start?s.start.split("T")[0]===e:!1)})),n=`${this.API_URL}/date/${e}`;return this.http.get(n).pipe(w(r=>{if(r.success&&r.data)return this.serverAvailable=!0,r.data.filter(i=>i.start?i.start.split("T")[0]===e:!1);throw new Error(r.message||"Invalid response format")}),D(r=>t()))}getMockBookings(){return this.http.get(this.MOCK_URL).pipe(D(e=>(console.error("Errore nel caricamento del mock prenotazioni:",e),x({bookings:[],allBookings:[]}))))}createBooking(e){return this.isServerAvailable()?this.http.post(this.API_URL,e).pipe(w(t=>(this.serverAvailable=!0,t)),D(t=>x({success:!0,data:e,message:"Prenotazione creata (fallback mock)"}))):x({success:!0,data:e,message:"Prenotazione creata (mock locale)"})}deleteBooking(e){return this.isServerAvailable()?this.http.delete(`${this.API_URL}/${e}`).pipe(w(t=>(this.serverAvailable=!0,t)),D(t=>x({success:!0,message:"Prenotazione eliminata (fallback mock)"}))):x({success:!0,message:"Prenotazione eliminata (mock locale)"})}static \u0275fac=function(t){return new(t||C)(H(V))};static \u0275prov=O({token:C,factory:C.\u0275fac,providedIn:"root"})};var W=class C{constructor(e){this.bookingsService=e}calendar;bookings=[];allBookings=[];MAX_CAPACITY=5;STORAGE_KEY="capacita_massima_palestra";storageListener;visibilityListener;capacityChangeListener;selectedDateForBooking=null;currentViewingEvent=null;isLoading=!0;users=[{id:"1",name:"Mario Rossi",company:"Acme Corporation"},{id:"2",name:"Laura Bianchi",company:"TechSolutions S.r.l."},{id:"3",name:"Giovanni Verdi",company:"Global Industries"},{id:"4",name:"Anna Ferrari",company:"Innovation Labs"},{id:"5",name:"Paolo Neri",company:"Digital Services"},{id:"6",name:"Maria Russo",company:"Acme Corporation"},{id:"7",name:"Luca Colombo",company:"TechSolutions S.r.l."},{id:"8",name:"Giulia Esposito",company:"Global Industries"}];ngOnInit(){this.loadMaxCapacity(),this.loadBookings(),this.storageListener=e=>{if(e.key===this.STORAGE_KEY&&e.newValue){let t=parseInt(e.newValue,10);t&&t>0&&t!==this.MAX_CAPACITY&&(this.MAX_CAPACITY=t,this.updateCalendarEvents())}},window.addEventListener("storage",this.storageListener),this.visibilityListener=()=>{document.hidden||this.loadMaxCapacity()},document.addEventListener("visibilitychange",this.visibilityListener),this.capacityChangeListener=e=>{if(e.detail&&e.detail.capacity){let t=parseInt(e.detail.capacity,10);t&&t>0&&t!==this.MAX_CAPACITY&&(this.MAX_CAPACITY=t,this.updateCalendarEvents())}},window.addEventListener("capacitaMassimaChanged",this.capacityChangeListener)}loadMaxCapacity(){let e=localStorage.getItem(this.STORAGE_KEY);if(e){let t=parseInt(e,10);t&&t>0&&(this.MAX_CAPACITY=t,this.calendar&&this.updateCalendarEvents())}}updateCalendarEvents(){this.calendar&&this.loadBookings()}ngAfterViewInit(){this.waitForFullCalendar(()=>{if(!this.isLoading)this.initializeCalendar(),this.setupModalHandlers();else{let e=setInterval(()=>{this.isLoading||(clearInterval(e),this.initializeCalendar(),this.setupModalHandlers())},100);setTimeout(()=>{clearInterval(e),this.isLoading&&(this.isLoading=!1,this.initializeCalendar(),this.setupModalHandlers())},5e3)}})}waitForFullCalendar(e){typeof window.FullCalendar<"u"?e():setTimeout(()=>this.waitForFullCalendar(e),100)}ngOnDestroy(){this.calendar&&this.calendar.destroy(),this.storageListener&&window.removeEventListener("storage",this.storageListener),this.visibilityListener&&document.removeEventListener("visibilitychange",this.visibilityListener),this.capacityChangeListener&&window.removeEventListener("capacitaMassimaChanged",this.capacityChangeListener)}formatDateISO(e){let t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");return`${t}-${n}-${r}`}loadBookings(){this.isLoading=!0,this.bookingsService.getBookings().subscribe({next:e=>{this.bookings=e.bookings,this.allBookings=e.allBookings,this.isLoading=!1,this.calendar&&this.refreshCalendar()},error:e=>{this.isLoading=!1,this.bookings=[],this.allBookings=[],this.calendar&&this.refreshCalendar()}})}refreshCalendar(){if(!this.calendar)return;this.calendar.getEvents().forEach(d=>{d.remove()});let t=this.generateGroupedBookingEvents(),n=this.generateAvailabilityBackgrounds();[...t,...n].forEach(d=>{try{this.calendar.addEvent(d)}catch{}}),setTimeout(()=>{this.calendar.render()},200)}countBookingsInSlot(e,t){let n=0;return this.allBookings.forEach(r=>{let d=new Date(r.start),i=new Date(r.end);d<t&&i>e&&n++}),n}generateGroupedBookingEvents(){let e=[];new Date().setHours(0,0,0,0);let n=new Map,r=new Map,d=new Map;return this.bookings.forEach(i=>{if(i.start)try{let m=new Date(i.start).toISOString().split("T")[0];d.has(m)||d.set(m,[]),d.get(m).push(i)}catch{}}),d.forEach((i,m)=>{let p={id:`day_${m}`,title:"Prenotazione",start:m,allDay:!0,display:"block",backgroundColor:"#405189",borderColor:"#405189",textColor:"#fff",classNames:["fc-event","fc-event-solid","fc-daygrid-event"],extendedProps:{bookings:i,count:i.length}};n.set(m,p),e.push(p);let g=[];i.forEach(s=>{let c=new Date(s.start),u=new Date(s.end),v=!1;for(let f=0;f<g.length;f++){let h=g[f];if(c<=h.end&&u>=h.start){h.start=c<h.start?c:h.start,h.end=u>h.end?u:h.end,h.bookings.find(y=>y.id===s.id)||h.bookings.push(s),v=!0;break}}v||g.push({start:c,end:u,bookings:[s]})});for(let s=g.length-1;s>=0;s--)for(let c=s-1;c>=0;c--)if(g[s].start<=g[c].end&&g[s].end>=g[c].start){g[c].start=g[s].start<g[c].start?g[s].start:g[c].start,g[c].end=g[s].end>g[c].end?g[s].end:g[c].end,g[s].bookings.forEach(u=>{g[c].bookings.find(v=>v.id===u.id)||g[c].bookings.push(u)}),g.splice(s,1);break}g.forEach((s,c)=>{let u=`${m}_${c}`;if(!r.has(u)){let v=new Date(s.start);v.setMinutes(Math.floor(v.getMinutes()/30)*30,0,0);let f=new Date(s.end);f.setMinutes(Math.ceil(f.getMinutes()/30)*30,0,0);let h={id:`slot_${u}`,title:"Prenotazione",start:v.toISOString(),end:f.toISOString(),backgroundColor:"#405189",borderColor:"#405189",display:"block",extendedProps:{bookings:s.bookings,count:s.bookings.length}};e.push(h),r.set(u,h)}})}),e}generateAvailabilityBackgrounds(){let e=[],t=new Date;for(let n=0;n<14;n++){let r=new Date(t);r.setDate(t.getDate()+n);let d=r.toISOString().split("T")[0];for(let i=6;i<23;i++)for(let m=0;m<60;m+=30){let p=new Date(`${d}T${String(i).padStart(2,"0")}:${String(m).padStart(2,"0")}:00`),g=new Date(p.getTime()+30*6e4),s=this.countBookingsInSlot(p,g),c,u;s>=this.MAX_CAPACITY?(c="#f06548",u=`Occupato (${s}/${this.MAX_CAPACITY})`):s>0?(c="#f7b84b",u=`Parzialmente occupato (${s}/${this.MAX_CAPACITY})`):(c="rgba(10, 179, 156, 0.15)",u="Disponibile"),e.push({start:p.toISOString(),end:g.toISOString(),display:"background",backgroundColor:c,title:u})}}return e}initializeCalendar(){let e=document.getElementById("calendar"),t=window.FullCalendar;if(!e||!t)return;let n=this.generateGroupedBookingEvents(),r=this.generateAvailabilityBackgrounds(),d=[...n,...r];this.calendar=new t.Calendar(e,{locale:"it",headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay"},initialView:"dayGridMonth",slotMinTime:"06:00:00",slotMaxTime:"23:00:00",slotDuration:"00:30:00",allDaySlot:!1,editable:!1,selectable:!0,selectMirror:!0,dayMaxEvents:1,weekends:!0,businessHours:{daysOfWeek:[1,2,3,4,5,6],startTime:"06:00",endTime:"23:00"},events:d,dateClick:i=>{this.calendar&&this.calendar.view&&this.calendar.view.type==="dayGridMonth"&&this.openBookingModalWithDayView(i.date)},select:i=>{let m=new Date(i.start);m.setHours(0,0,0,0),this.openBookingModalWithDayView(m),this.calendar&&this.calendar.unselect()},eventClick:i=>{if(i.event&&i.event.display!=="background"){let m;if(i.event.start instanceof Date)m=new Date(i.event.start);else if(typeof i.event.start=="string")m=new Date(i.event.start);else return;m.setHours(0,0,0,0),this.openBookingModalWithDayView(m)}},eventMouseEnter:i=>{i.event&&i.event.display!=="background"&&i.el&&(i.el.style.cursor="pointer")},eventDidMount:i=>{i.event&&i.event.display==="background"&&i.event.title&&i.el&&(i.el.title=i.event.title);let m=()=>{document.querySelectorAll(".fc-more-link, .fc-daygrid-more-link").forEach(p=>{p.style.display="none",p.style.visibility="hidden",p.style.opacity="0",p.style.height="0",p.style.width="0",p.style.padding="0",p.style.margin="0",p.style.fontSize="0",p.style.lineHeight="0",p.textContent="",p.remove()})};m(),setTimeout(m,100),setTimeout(m,300)},dayCellDidMount:i=>{if(this.calendar&&this.calendar.view&&this.calendar.view.type==="dayGridMonth"){new Date(i.date).setHours(6,0,0,0),new Date(i.date).setHours(23,0,0,0);let g=0,s=!1;for(let c=6;c<23;c++)for(let u=0;u<60;u+=30){let v=new Date(i.date);v.setHours(c,u,0,0);let f=new Date(v.getTime()+30*6e4),h=this.countBookingsInSlot(v,f);h>g&&(g=h),h<this.MAX_CAPACITY&&(s=!0)}i.el&&(g>=this.MAX_CAPACITY&&!s?i.el.style.backgroundColor="rgba(240, 101, 72, 0.2)":g>0?i.el.style.backgroundColor="rgba(247, 184, 75, 0.15)":i.el.style.backgroundColor="rgba(10, 179, 156, 0.1)",i.el.querySelectorAll(".fc-more-link, .fc-daygrid-more-link").forEach(u=>{u.style.display="none",u.style.visibility="hidden",u.style.opacity="0",u.style.height="0",u.style.width="0",u.style.padding="0",u.style.margin="0",u.style.fontSize="0",u.style.lineHeight="0",u.textContent="",u.remove()}))}}}),this.calendar.render()}setupModalHandlers(){let e=document.getElementById("viewDayBookingsModal");e&&e.addEventListener("hidden.bs.modal",()=>{this.cleanupModal()});let t=document.getElementById("viewBookingModal");t&&t.addEventListener("hidden.bs.modal",()=>{this.cleanupModal()});let n=document.getElementById("bookingModal");n&&n.addEventListener("hidden.bs.modal",()=>{this.cleanupModal()})}cleanupModal(){document.querySelectorAll(".modal-backdrop").forEach(n=>n.remove()),document.body.classList.remove("modal-open"),document.body.style.overflow="",document.body.style.paddingRight="",document.querySelectorAll(".modal.show").forEach(n=>{n.classList.remove("show"),n.style.display="none"})}openBookingModalWithDayView(e){let t={weekday:"long",year:"numeric",month:"long",day:"numeric"},n=e.toLocaleDateString("it-IT",t),r=document.getElementById("viewDayBookingsDate");r&&(r.textContent=n),this.selectedDateForBooking=e;let d=document.getElementById("viewDayBookingsTableBody");if(!d)return;d.innerHTML=`
      <tr>
        <td colspan="3" class="text-center py-4">
          <div class="spinner-border text-primary" role="status">
            <span class="visually-hidden">Caricamento...</span>
          </div>
        </td>
      </tr>
    `;let i=this.formatDateISO(e);this.bookingsService.getBookingsByDate(i).subscribe({next:m=>{let p=m.filter(s=>this.formatDateISO(new Date(s.start))===i);if(d.innerHTML="",p.length===0)d.innerHTML=`
            <tr>
              <td colspan="3" class="text-center text-muted py-4">
                <i class="ri-calendar-check-line fs-20 d-block mb-2"></i>
                Nessuna prenotazione per questo giorno
              </td>
            </tr>
          `;else{let s=new Date(e);s.setHours(6,0,0,0);let c=new Date(e);c.setHours(23,0,0,0);let u=new Date(s),v=!1;for(;u<c;){let f=new Date(u),h=new Date(u.getTime()+30*6e4),y=p.filter(E=>{let M=new Date(E.start),_=new Date(E.end);return M<h&&_>f}),S=y.length;if(S>0){v=!0;let E="";S>=this.MAX_CAPACITY?E='<span class="badge bg-danger-subtle text-danger">Completo</span>':S>0&&(E='<span class="badge bg-warning-subtle text-warning">Pochi posti</span>');let M=y.map(B=>{let P=B.extendedProps?.user||B.user||B.extendedProps?.bookings&&B.extendedProps.bookings[0]?.extendedProps?.user||"Utente Sconosciuto",J=P.substring(0,2).toUpperCase(),L=new Date(B.start),z=new Date(B.end),Z=`${String(L.getHours()).padStart(2,"0")}:${String(L.getMinutes()).padStart(2,"0")} - ${String(z.getHours()).padStart(2,"0")}:${String(z.getMinutes()).padStart(2,"0")}`;return`
                  <div class="d-flex align-items-center mb-2">
                    <div class="avatar-xxs me-2">
                      <div class="avatar-title bg-primary-subtle text-primary rounded-circle fs-10">${J}</div>
                    </div>
                    <div class="flex-grow-1">
                      <span class="fs-13 fw-semibold d-block">${P}</span>
                      <small class="text-muted d-block">${Z}</small>
                    </div>
                  </div>
                `}).join(""),Q=`
                <tr>
                  <td class="fw-semibold">${`${String(f.getHours()).padStart(2,"0")}:${String(f.getMinutes()).padStart(2,"0")} - ${String(h.getHours()).padStart(2,"0")}:${String(h.getMinutes()).padStart(2,"0")}`}</td>
                  <td>${M}</td>
                  <td>${S} / ${this.MAX_CAPACITY} persone<br>${E}</td>
                </tr>
              `;d.innerHTML+=Q}u=h}v||(d.innerHTML=`
              <tr>
                <td colspan="3" class="text-center text-muted py-4">
                  <i class="ri-calendar-check-line fs-20 d-block mb-2"></i>
                  Nessuna prenotazione per questo giorno
                </td>
              </tr>
            `)}let g=document.getElementById("viewDayBookingsModal");if(g){let s=window.bootstrap?.Modal;if(s)new s(g).show();else{g.classList.add("show"),g.style.display="block",document.body.classList.add("modal-open");let c=document.createElement("div");c.className="modal-backdrop fade show",document.body.appendChild(c)}}},error:m=>{d.innerHTML=`
          <tr>
            <td colspan="3" class="text-center text-danger py-4">
              <i class="ri-error-warning-line fs-20 d-block mb-2"></i>
              Errore nel caricamento delle prenotazioni
            </td>
          </tr>
        `}})}openCreateBookingModal(){let e=document.getElementById("viewDayBookingsModal");if(e){e.classList.remove("show"),e.style.display="none",e.setAttribute("aria-hidden","true"),e.removeAttribute("aria-modal");let t=window.bootstrap?.Modal;if(t){let n=t.getInstance(e);n&&n.hide()}}this.cleanupModal(),setTimeout(()=>{this.openBookingModalAfterClose()},400)}openBookingModalAfterClose(){if(this.cleanupModal(),this.selectedDateForBooking){let i=this.selectedDateForBooking.getFullYear(),m=String(this.selectedDateForBooking.getMonth()+1).padStart(2,"0"),p=String(this.selectedDateForBooking.getDate()).padStart(2,"0"),g=document.getElementById("bookingDate");g&&(g.value=`${i}-${m}-${p}`)}let e=document.getElementById("bookingStartTime"),t=document.getElementById("bookingEndTime"),n=document.getElementById("bookingUser");e&&(e.value=""),t&&(t.value=""),n&&(n.value="");let r=document.getElementById("availabilityInfo");r&&(r.style.display="none");let d=document.getElementById("bookingModal");if(d){let i=window.bootstrap?.Modal;if(i){let m=i.getInstance(d);m&&m.dispose(),new i(d).show()}else d.classList.add("show"),d.style.display="block",d.setAttribute("aria-modal","true"),d.removeAttribute("aria-hidden"),document.body.classList.add("modal-open")}}showBookingDetails(e){let t=new Date(e.start);t.setHours(0,0,0,0),this.openBookingModalWithDayView(t)}deleteCurrentBooking(){if(this.currentViewingEvent&&confirm("Sei sicuro di voler cancellare questa prenotazione?")){let e=this.currentViewingEvent.id;this.currentViewingEvent.extendedProps&&this.currentViewingEvent.extendedProps.bookings?this.currentViewingEvent.extendedProps.bookings.forEach(r=>{this.bookingsService.deleteBooking(r.id).subscribe({next:()=>{let d=this.allBookings.findIndex(m=>m.id===r.id);d>-1&&this.allBookings.splice(d,1);let i=this.bookings.findIndex(m=>m.id===r.id);i>-1&&this.bookings.splice(i,1)}})}):this.bookingsService.deleteBooking(e).subscribe({next:()=>{let n=this.allBookings.findIndex(d=>d.id===e);n>-1&&this.allBookings.splice(n,1);let r=this.bookings.findIndex(d=>d.id===e);r>-1&&this.bookings.splice(r,1),this.refreshCalendar()}}),this.refreshCalendar();let t=document.getElementById("viewBookingModal");if(t){let n=window.bootstrap?.Modal;if(n){let r=n.getInstance(t);r&&r.hide()}}alert("Prenotazione cancellata con successo!"),this.currentViewingEvent=null}}checkAvailabilityForPeriod(e,t){let n=0,r=new Date(e),d=new Date(t),i=new Date(r);for(;i<d;){let m=new Date(i.getTime()+18e5),p=this.countBookingsInSlot(i,m);p>n&&(n=p),i=m}return n}confirmBooking(){let e=document.getElementById("bookingUser"),t=document.getElementById("bookingDate"),n=document.getElementById("bookingStartTime"),r=document.getElementById("bookingEndTime");if(!e||!t||!n||!r)return;let d=e.value,i=t.value,m=n.value,p=r.value;if(!d){alert("Seleziona un utente!");return}if(!i||!m||!p){alert("Per favore compila tutti i campi!");return}let s=e.options[e.selectedIndex].text.split(" - ")[0],c=new Date(`${i}T${m}`),u=new Date(`${i}T${p}`),v=(u.getTime()-c.getTime())/(1e3*60);if(v<30){alert("La durata minima della prenotazione \xE8 30 minuti!");return}if(v>120){alert("La durata massima della prenotazione \xE8 2 ore!");return}if(u<=c){alert("L'orario di fine deve essere successivo all'orario di inizio!");return}if(this.checkAvailabilityForPeriod(c,u)>=this.MAX_CAPACITY){alert(`\u26A0\uFE0F Spiacenti, la palestra \xE8 diventata al completo per questo orario.

Qualcun altro ha appena prenotato. Prova un altro orario.`);return}let h={id:String(Date.now()),title:"Prenotazione",start:`${i}T${m}`,end:`${i}T${p}`,backgroundColor:"#405189",borderColor:"#405189",extendedProps:{user:s}};this.bookingsService.createBooking(h).subscribe({next:y=>{this.bookings.push(y.data),this.allBookings.push({id:y.data.id,user:s,start:y.data.start,end:y.data.end});let S=document.getElementById("bookingModal");if(S){let E=window.bootstrap?.Modal;if(E){let M=E.getInstance(S);M&&M.hide()}}this.refreshCalendar(),alert(`\u2713 Prenotazione creata con successo!

Utente: ${s}
Data: ${new Date(i).toLocaleDateString("it-IT")}
Orario: ${m} - ${p}`)},error:y=>{alert("Errore nella creazione della prenotazione. Riprova.")}})}scrollToTop(){window.scrollTo({top:0,behavior:"smooth"})}closeModal(e){let t=document.getElementById(e);if(!t)return;let n=window.bootstrap?.Modal;if(n){let r=n.getInstance(t);r?r.hide():new n(t).hide()}else t.classList.remove("show"),t.style.display="none",t.setAttribute("aria-hidden","true"),t.removeAttribute("aria-modal"),this.cleanupModal()}static \u0275fac=function(t){return new(t||C)(G(I))};static \u0275cmp=$({type:C,selectors:[["app-gestisci-prenotazioni"]],standalone:!0,features:[F],decls:195,vars:0,consts:[[1,"row"],[1,"col-12"],[1,"page-title-box","d-sm-flex","align-items-center","justify-content-between"],[1,"mb-sm-0"],[1,"page-title-right"],[1,"breadcrumb","m-0"],[1,"breadcrumb-item"],["routerLink","/backoffice/dashboard"],[1,"breadcrumb-item","active"],[1,"col-xl-3"],[1,"card"],[1,"card-body","bg-success-subtle"],[1,"d-flex"],[1,"flex-shrink-0"],[1,"ri-calendar-check-line","text-success","display-6"],[1,"flex-grow-1","ms-3"],[1,"fs-16"],[1,"text-muted","mb-0"],[1,"card-header"],[1,"card-title","mb-0"],[1,"card-body"],[1,"mb-3"],[1,"fs-14","mb-2"],[1,"d-flex","align-items-center","mb-2"],[1,"me-2",2,"width","30px","height","20px","background-color","#0ab39c","display","inline-block","border-radius","3px"],[1,"me-2",2,"width","30px","height","20px","background-color","#f7b84b","display","inline-block","border-radius","3px"],[1,"d-flex","align-items-center"],[1,"me-2",2,"width","30px","height","20px","background-color","#f06548","display","inline-block","border-radius","3px"],[1,"my-3"],[1,"me-2",2,"width","30px","height","20px","background-color","#405189","display","inline-block","border-radius","3px"],[1,"col-xl-9"],[1,"card","card-h-100"],["id","calendar"],["id","viewDayBookingsModal","tabindex","-1","aria-labelledby","viewDayBookingsModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-xl","modal-dialog-centered","modal-dialog-scrollable"],[1,"modal-content"],[1,"modal-header","bg-primary-subtle"],["id","viewDayBookingsModalLabel",1,"modal-title"],["id","viewDayBookingsDate"],["type","button","aria-label","Chiudi",1,"btn-close",3,"click"],[1,"modal-body"],["role","alert",1,"alert","alert-info"],[1,"ri-information-line","me-2"],[1,"table-responsive"],[1,"table","table-striped","table-hover","align-middle","mb-0"],["scope","col"],["id","viewDayBookingsTableBody"],[1,"modal-footer"],["type","button",1,"btn","btn-success",3,"click"],[1,"ri-add-line","me-1"],["type","button",1,"btn","btn-soft-secondary",3,"click"],["id","viewBookingModal","tabindex","-1","aria-labelledby","viewBookingModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered"],["id","viewBookingModalLabel",1,"modal-title"],[1,"form-label","fw-semibold"],["type","date","id","viewBookingDate","disabled","",1,"form-control"],[1,"row","mb-3"],[1,"col-6"],["type","time","id","viewBookingStartTime","disabled","",1,"form-control"],["type","time","id","viewBookingEndTime","disabled","",1,"form-control"],["type","text","id","viewBookingUser","disabled","",1,"form-control"],["id","viewDuration"],["type","button",1,"btn","btn-danger",3,"click"],[1,"ri-delete-bin-line","me-1"],["id","bookingModal","tabindex","-1","aria-labelledby","bookingModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-lg","modal-dialog-centered","modal-dialog-scrollable"],[1,"modal-header","bg-success-subtle"],["id","bookingModalLabel",1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],["id","bookingForm"],["for","bookingUser",1,"form-label"],[1,"text-danger"],["id","bookingUser","required","",1,"form-select"],["value",""],["value","1"],["value","2"],["value","3"],["value","4"],["value","5"],["value","6"],["value","7"],["value","8"],[1,"text-muted"],["for","bookingDate",1,"form-label"],["type","date","id","bookingDate","required","",1,"form-control"],["for","bookingStartTime",1,"form-label"],["type","time","id","bookingStartTime","required","",1,"form-control"],["for","bookingEndTime",1,"form-label"],["type","time","id","bookingEndTime","required","",1,"form-control"],["id","availabilityInfo","role","alert",1,"alert",2,"display","none"],[1,"ri-group-line","me-2"],["id","availabilityText"],["id","back-to-top",1,"btn","btn-danger","btn-icon",3,"click"],[1,"ri-arrow-up-line"]],template:function(t,n){t&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"h4",3),l(4,"Gestisci Prenotazioni"),a(),o(5,"div",4)(6,"ol",5)(7,"li",6)(8,"a",7),l(9,"Dashboard"),a()(),o(10,"li",8),l(11,"Gestisci Prenotazioni"),a()()()()()(),o(12,"div",0)(13,"div",9)(14,"div",10)(15,"div",11)(16,"div",12)(17,"div",13),b(18,"i",14),a(),o(19,"div",15)(20,"h6",16),l(21,"Prenota!"),a(),o(22,"p",17),l(23,"Seleziona data e ora nel calendario. La palestra pu\xF2 ospitare massimo 5 persone contemporaneamente."),a()()()()(),o(24,"div",10)(25,"div",18)(26,"h5",19),l(27,"Legenda"),a()(),o(28,"div",20)(29,"div",21)(30,"h6",22),l(31,"Disponibilit\xE0 Palestra:"),a(),o(32,"div",23),b(33,"span",24),o(34,"span"),l(35,"Disponibile"),a()(),o(36,"div",23),b(37,"span",25),o(38,"span"),l(39,"Parzialmente Occupato"),a()(),o(40,"div",26),b(41,"span",27),o(42,"span"),l(43,"Occupato"),a()()(),b(44,"hr",28),o(45,"div")(46,"h6",22),l(47,"Prenotazioni:"),a(),o(48,"div",26),b(49,"span",29),o(50,"span"),l(51,"Prenotazioni Utenti"),a()()()()()(),o(52,"div",30)(53,"div",31)(54,"div",20),b(55,"div",32),a()()()(),o(56,"div",33)(57,"div",34)(58,"div",35)(59,"div",36)(60,"h5",37),l(61,"Prenotazioni per il "),b(62,"span",38),a(),o(63,"button",39),k("click",function(){return n.closeModal("viewDayBookingsModal")}),a()(),o(64,"div",40)(65,"div",41),b(66,"i",42),l(67,' Visualizza tutte le prenotazioni per questo giorno. Clicca su "Aggiungi Prenotazione" se un utente ha bisogno di assistenza. '),a(),o(68,"div",43)(69,"table",44)(70,"thead")(71,"tr")(72,"th",45),l(73,"Orario"),a(),o(74,"th",45),l(75,"Utenti Prenotati"),a(),o(76,"th",45),l(77,"Occupazione"),a()()(),b(78,"tbody",46),a()()(),o(79,"div",47)(80,"button",48),k("click",function(){return n.openCreateBookingModal()}),b(81,"i",49),l(82," Aggiungi Prenotazione "),a(),o(83,"button",50),k("click",function(){return n.closeModal("viewDayBookingsModal")}),l(84,"Chiudi"),a()()()()(),o(85,"div",51)(86,"div",52)(87,"div",35)(88,"div",36)(89,"h5",53),l(90,"Dettagli Prenotazione"),a(),o(91,"button",39),k("click",function(){return n.closeModal("viewBookingModal")}),a()(),o(92,"div",40)(93,"div",21)(94,"label",54),l(95,"Data"),a(),b(96,"input",55),a(),o(97,"div",56)(98,"div",57)(99,"label",54),l(100,"Ora Inizio"),a(),b(101,"input",58),a(),o(102,"div",57)(103,"label",54),l(104,"Ora Fine"),a(),b(105,"input",59),a()(),o(106,"div",21)(107,"label",54),l(108,"Utente"),a(),b(109,"input",60),a(),o(110,"div",41),b(111,"i",42),o(112,"strong"),l(113,"Durata:"),a(),b(114,"span",61),a()(),o(115,"div",47)(116,"button",50),k("click",function(){return n.closeModal("viewBookingModal")}),l(117,"Chiudi"),a(),o(118,"button",62),k("click",function(){return n.deleteCurrentBooking()}),b(119,"i",63),l(120," Cancella Prenotazione "),a()()()()(),o(121,"div",64)(122,"div",65)(123,"div",35)(124,"div",66)(125,"h5",67),l(126,"Crea Prenotazione per Utente"),a(),o(127,"button",68),k("click",function(){return n.closeModal("bookingModal")}),a()(),o(128,"div",40)(129,"div",41),b(130,"i",42),l(131," Stai creando una prenotazione per conto di un utente che non \xE8 riuscito a prenotare autonomamente. "),a(),o(132,"form",69)(133,"div",21)(134,"label",70),l(135,"Seleziona Utente "),o(136,"span",71),l(137,"*"),a()(),o(138,"select",72)(139,"option",73),l(140,"Seleziona un utente"),a(),o(141,"option",74),l(142,"Mario Rossi - Acme Corporation"),a(),o(143,"option",75),l(144,"Laura Bianchi - TechSolutions S.r.l."),a(),o(145,"option",76),l(146,"Giovanni Verdi - Global Industries"),a(),o(147,"option",77),l(148,"Anna Ferrari - Innovation Labs"),a(),o(149,"option",78),l(150,"Paolo Neri - Digital Services"),a(),o(151,"option",79),l(152,"Maria Russo - Acme Corporation"),a(),o(153,"option",80),l(154,"Luca Colombo - TechSolutions S.r.l."),a(),o(155,"option",81),l(156,"Giulia Esposito - Global Industries"),a()(),o(157,"small",82),l(158,"Prenotazione per conto dell'utente selezionato"),a()(),o(159,"div",21)(160,"label",83),l(161,"Data "),o(162,"span",71),l(163,"*"),a()(),b(164,"input",84),a(),o(165,"div",56)(166,"div",57)(167,"label",85),l(168,"Ora Inizio "),o(169,"span",71),l(170,"*"),a()(),b(171,"input",86),a(),o(172,"div",57)(173,"label",87),l(174,"Ora Fine "),o(175,"span",71),l(176,"*"),a()(),b(177,"input",88),a()(),o(178,"div",41),b(179,"i",42),o(180,"strong"),l(181,"Nota:"),a(),l(182," La prenotazione ha una durata minima di 30 minuti e massima di 2 ore. "),a(),o(183,"div",89),b(184,"i",90),o(185,"strong"),l(186,"Disponibilit\xE0 attuale:"),a(),b(187,"span",91),a()()(),o(188,"div",47)(189,"button",50),k("click",function(){return n.closeModal("bookingModal")}),l(190,"Annulla"),a(),o(191,"button",48),k("click",function(){return n.confirmBooking()}),l(192,"Conferma Prenotazione"),a()()()()(),o(193,"button",92),k("click",function(){return n.scrollToTop()}),b(194,"i",93),a())},dependencies:[R,U,j,X,q,K,N,Y],styles:[".fc-timegrid[_ngcontent-%COMP%]   .fc-bg-event[_ngcontent-%COMP%]{opacity:.35!important;z-index:0!important}.fc-timegrid[_ngcontent-%COMP%]   .fc-event[_ngcontent-%COMP%]{font-size:.85em;z-index:3!important;opacity:.5!important;border-width:3px!important;border-style:solid!important;font-weight:600!important}.fc-timegrid[_ngcontent-%COMP%]   .fc-event-title[_ngcontent-%COMP%]{text-shadow:0 1px 2px rgba(255,255,255,.8)}.fc-timegrid[_ngcontent-%COMP%]   .fc-day-today[_ngcontent-%COMP%]{background-color:#f0f2f54d!important}.fc-daygrid[_ngcontent-%COMP%]   .fc-event[_ngcontent-%COMP%]{font-size:.85em;opacity:1!important}.fc-daygrid[_ngcontent-%COMP%]   .fc-more-link[_ngcontent-%COMP%]{display:none!important;visibility:hidden!important;opacity:0!important;height:0!important;width:0!important;padding:0!important;margin:0!important}.fc-more-link[_ngcontent-%COMP%]{display:none!important;visibility:hidden!important;opacity:0!important;height:0!important;width:0!important;padding:0!important;margin:0!important;font-size:0!important;line-height:0!important}.fc-daygrid-more-link[_ngcontent-%COMP%]{display:none!important;visibility:hidden!important}.fc-daygrid-day-events[_ngcontent-%COMP%]{display:flex;flex-direction:column}.fc-timegrid-event[_ngcontent-%COMP%]{cursor:pointer}"]})};export{W as GestisciPrenotazioniComponent};
