import{a as I}from"./chunk-Y5DSX2WP.js";import{D as l,E as p,I as b,J as u,K as g,N as e,O as t,P as n,R as m,U as i,V as k,W as v,X as h,aa as S,ja as x,ka as w,pa as E,qa as y,ra as L,s as f,sa as A}from"./chunk-GFW33JLT.js";function U(c,r){c&1&&(e(0,"li",56)(1,"a",86),i(2,"Registra Operatore"),t()())}var _=class c{constructor(r,o){this.authService=r;this.router=o}currentUser=null;isAdmin=!1;get userIsAdmin(){return this.authService.isAdmin()}get currentYear(){return new Date().getFullYear()}ngOnInit(){if(!this.authService.isAuthenticated()){this.router.navigate(["/auth/login"]);return}this.currentUser=this.authService.getCurrentUser(),this.isAdmin=this.authService.isAdmin(),this.authService.currentUser$.subscribe(r=>{this.currentUser=r,this.isAdmin=this.authService.isAdmin(),r||this.router.navigate(["/auth/login"])}),this.initMobileMenu()}logout(){this.authService.logout()}ngOnDestroy(){}initMobileMenu(){let r=document.getElementById("topnav-hamburger-icon"),o=document.querySelector(".vertical-overlay");r&&(r.addEventListener("click",function(a){window.innerWidth<=767&&(document.body.classList.toggle("vertical-sidebar-enable"),document.body.classList.contains("vertical-sidebar-enable")&&document.documentElement.setAttribute("data-sidebar-size","lg"))},!0),o&&o.addEventListener("click",function(){document.body.classList.remove("vertical-sidebar-enable")}))}toggleMenu(r,o){r.preventDefault();let a=document.getElementById(o);if(a){let d=window.bootstrap?.Collapse;if(d){let s=new d(a,{toggle:!0})}else a.classList.toggle("show")}}static \u0275fac=function(o){return new(o||c)(p(I),p(y))};static \u0275cmp=f({type:c,selectors:[["app-backoffice-layout"]],standalone:!0,features:[S],decls:154,vars:9,consts:[["id","layout-wrapper"],["id","page-topbar"],[1,"layout-width"],[1,"navbar-header"],[1,"d-flex"],[1,"navbar-brand-box","horizontal-logo"],["routerLink","/backoffice/dashboard",1,"logo","logo-dark"],[1,"logo-sm"],["src","assets/images/logo-investire-bianco-removebg-preview.png","alt","","height","22"],[1,"logo-lg"],["src","assets/images/logo-investire-bianco-removebg-preview.png","alt","","height","17"],["routerLink","/backoffice/dashboard",1,"logo","logo-light"],["type","button","id","topnav-hamburger-icon",1,"btn","btn-sm","px-3","fs-16","header-item","vertical-menu-btn","topnav-hamburger"],[1,"hamburger-icon"],[1,"d-flex","align-items-center"],["id","notificationDropdown",1,"dropdown","topbar-head-dropdown","ms-1","header-item"],["type","button","id","page-header-notifications-dropdown","data-bs-toggle","dropdown","data-bs-auto-close","outside","aria-haspopup","true","aria-expanded","false",1,"btn","btn-icon","btn-topbar","btn-ghost-secondary","rounded-circle"],[1,"bx","bx-bell","fs-22"],[1,"position-absolute","topbar-badge","fs-10","translate-middle","badge","rounded-pill","bg-danger"],[1,"visually-hidden"],["aria-labelledby","page-header-notifications-dropdown",1,"dropdown-menu","dropdown-menu-lg","dropdown-menu-end","p-0"],[1,"dropdown-head","bg-secondary","bg-pattern","rounded-top"],[1,"p-3"],[1,"row","align-items-center"],[1,"col"],[1,"m-0","fs-16","fw-semibold","text-white"],[1,"col-auto","dropdown-tabs"],[1,"badge","bg-light-subtle","text-body","fs-13"],["data-simplebar","",1,"pe-2",2,"max-height","300px"],[1,"text-reset","notification-item","d-block","dropdown-item","position-relative"],[1,"avatar-xs","me-3","flex-shrink-0"],[1,"avatar-title","bg-warning-subtle","text-warning","rounded-circle","fs-16"],[1,"bx","bx-time"],[1,"flex-grow-1"],[1,"mt-0","mb-2","lh-base"],[1,"mb-0","fs-11","fw-medium","text-uppercase","text-muted"],[1,"mdi","mdi-clock-outline"],[1,"dropdown","ms-sm-3","header-item","topbar-user"],["type","button","id","page-header-user-dropdown","data-bs-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"btn"],[1,"text-start","ms-xl-2"],[1,"d-none","d-xl-inline-block","ms-1","fw-semibold","user-name-text"],[1,"d-none","d-xl-block","ms-1","fs-12","user-name-sub-text"],[1,"dropdown-menu","dropdown-menu-end"],[1,"dropdown-header"],["routerLink","/backoffice/profilo-operatore",1,"dropdown-item"],[1,"mdi","mdi-account-circle","text-muted","fs-16","align-middle","me-1"],[1,"align-middle"],[1,"dropdown-divider"],[1,"dropdown-item",2,"cursor","pointer",3,"click"],[1,"mdi","mdi-logout","text-muted","fs-16","align-middle","me-1"],[1,"app-menu","navbar-menu"],[1,"navbar-brand-box"],["id","scrollbar"],[1,"container-fluid"],["id","navbar-nav",1,"navbar-nav"],[1,"menu-title"],[1,"nav-item"],["routerLink","/backoffice/dashboard","routerLinkActive","active",1,"nav-link","menu-link"],[1,"ri-dashboard-2-line"],["routerLink","/backoffice/gestisci-prenotazioni","routerLinkActive","active",1,"nav-link","menu-link"],[1,"ri-calendar-check-line"],["role","button","aria-controls","sidebarUtenti",1,"nav-link","menu-link",2,"cursor","pointer",3,"click"],[1,"ri-group-line"],["id","sidebarUtenti",1,"collapse","menu-dropdown"],[1,"nav","nav-sm","flex-column"],["routerLink","/backoffice/registra-utente","routerLinkActive","active",1,"nav-link"],["routerLink","/backoffice/gestisci-utenti","routerLinkActive","active",1,"nav-link"],["role","button","aria-controls","sidebarBackoffice",1,"nav-link","menu-link",2,"cursor","pointer",3,"click"],[1,"ri-settings-3-line"],["id","sidebarBackoffice",1,"collapse","menu-dropdown"],["class","nav-item",4,"ngIf"],["routerLink","/backoffice/visualizza-operatori","routerLinkActive","active",1,"nav-link"],["routerLink","/backoffice/profilo-operatore","routerLinkActive","active",1,"nav-link"],["role","button","aria-controls","sidebarImpostazioni",1,"nav-link","menu-link",2,"cursor","pointer",3,"click"],[1,"ri-settings-2-line"],["id","sidebarImpostazioni",1,"collapse","menu-dropdown"],["routerLink","/backoffice/stampa-qrcode","routerLinkActive","active",1,"nav-link"],["routerLink","/backoffice/imposta-margine-entrata","routerLinkActive","active",1,"nav-link"],["routerLink","/backoffice/imposta-capacita-massima","routerLinkActive","active",1,"nav-link"],[1,"sidebar-background"],[1,"vertical-overlay"],[1,"main-content"],[1,"page-content"],[1,"footer"],[1,"row"],[1,"col-sm-12"],["routerLink","/backoffice/registra-operatore","routerLinkActive","active",1,"nav-link"]],template:function(o,a){o&1&&(e(0,"div",0)(1,"header",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"a",6)(7,"span",7),n(8,"img",8),t(),e(9,"span",9),n(10,"img",10),t()(),e(11,"a",11)(12,"span",7),n(13,"img",8),t(),e(14,"span",9),n(15,"img",10),t()()(),e(16,"button",12)(17,"span",13),n(18,"span")(19,"span")(20,"span"),t()()(),e(21,"div",14)(22,"div",15)(23,"button",16),n(24,"i",17),e(25,"span",18),i(26,"1"),e(27,"span",19),i(28,"unread messages"),t()()(),e(29,"div",20)(30,"div",21)(31,"div",22)(32,"div",23)(33,"div",24)(34,"h6",25),i(35," Notifiche "),t()(),e(36,"div",26)(37,"span",27),i(38," 1 Nuova"),t()()()()(),e(39,"div",28)(40,"div",29)(41,"div",4)(42,"div",30)(43,"span",31),n(44,"i",32),t()(),e(45,"div",33)(46,"h6",34),i(47,"Nuova prenotazione: Mario Rossi - Domani ore 10:00"),t(),e(48,"p",35)(49,"span"),n(50,"i",36),i(51," 2 ore fa"),t()()()()()()()(),e(52,"div",37)(53,"button",38)(54,"span",14)(55,"span",39)(56,"span",40),i(57),t(),e(58,"span",41),i(59),t()()()(),e(60,"div",42)(61,"h6",43),i(62),t(),e(63,"a",44),n(64,"i",45),e(65,"span",46),i(66,"Il Mio Profilo"),t()(),n(67,"div",47),e(68,"a",48),m("click",function(){return a.logout()}),n(69,"i",49),e(70,"span",46),i(71,"Esci"),t()()()()()()()(),e(72,"div",50)(73,"div",51)(74,"a",6)(75,"span",7),n(76,"img",8),t(),e(77,"span",9),n(78,"img",10),t()(),e(79,"a",11)(80,"span",7),n(81,"img",8),t(),e(82,"span",9),n(83,"img",10),t()()(),e(84,"div",52)(85,"div",53)(86,"ul",54)(87,"li",55)(88,"span"),i(89,"Menu"),t()(),e(90,"li",56)(91,"a",57),n(92,"i",58),e(93,"span"),i(94,"Dashboard"),t()()(),e(95,"li",56)(96,"a",59),n(97,"i",60),e(98,"span"),i(99,"Gestisci Prenotazioni"),t()()(),e(100,"li",56)(101,"a",61),m("click",function(s){return a.toggleMenu(s,"sidebarUtenti")}),n(102,"i",62),e(103,"span"),i(104,"Gestione Iscritti"),t()(),e(105,"div",63)(106,"ul",64)(107,"li",56)(108,"a",65),i(109,"Registrazione Utenti"),t()(),e(110,"li",56)(111,"a",66),i(112,"Visualizza Utenti"),t()()()()(),e(113,"li",56)(114,"a",67),m("click",function(s){return a.toggleMenu(s,"sidebarBackoffice")}),n(115,"i",68),e(116,"span"),i(117,"Gestione Backoffice"),t()(),e(118,"div",69)(119,"ul",64),b(120,U,3,0,"li",70),e(121,"li",56)(122,"a",71),i(123,"Visualizza Operatori"),t()(),e(124,"li",56)(125,"a",72),i(126,"Profilo"),t()()()()(),e(127,"li",56)(128,"a",73),m("click",function(s){return a.toggleMenu(s,"sidebarImpostazioni")}),n(129,"i",74),e(130,"span"),i(131,"Impostazioni"),t()(),e(132,"div",75)(133,"ul",64)(134,"li",56)(135,"a",76),i(136,"Stampa QRCode"),t()(),e(137,"li",56)(138,"a",77),i(139,"Imposta Margine Entrata"),t()(),e(140,"li",56)(141,"a",78),i(142,"Imposta Capacit\xE0 Massima"),t()()()()()()()(),n(143,"div",79),t(),n(144,"div",80),e(145,"div",81)(146,"div",82)(147,"div",53),n(148,"router-outlet"),t()(),e(149,"footer",83)(150,"div",53)(151,"div",84)(152,"div",85),i(153),t()()()()()()),o&2&&(l(57),h("",a.currentUser==null?null:a.currentUser.firstName," ",a.currentUser==null?null:a.currentUser.lastName,""),l(2),k(a.currentUser==null?null:a.currentUser.role),l(3),v("Benvenuto ",a.currentUser==null?null:a.currentUser.firstName,"!"),l(39),u("aria-expanded",!1),l(13),u("aria-expanded",!1),l(6),g("ngIf",a.userIsAdmin),l(8),u("aria-expanded",!1),l(25),v(" ",a.currentYear," \xA9 Palestra. "))},dependencies:[w,x,L,A,E]})};export{_ as BackofficeLayoutComponent};
