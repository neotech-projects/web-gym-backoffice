import{d as o,f as i,n,q as l,qa as u}from"./chunk-GFW33JLT.js";var c=class t{constructor(r){this.router=r}STORAGE_KEY="current_user";currentUserSubject=new i(this.getStoredUser());currentUser$=this.currentUserSubject.asObservable();login(r,a){let s=[{email:"alessandro.romano@palestra.it",password:"admin123",operator:{id:5,firstName:"Alessandro",lastName:"Romano",email:"alessandro.romano@palestra.it",role:"Admin"}},{email:"marco.bianchi@palestra.it",password:"operatore123",operator:{id:1,firstName:"Marco",lastName:"Bianchi",email:"marco.bianchi@palestra.it",role:"Operatore"}},{email:"sara.rossi@palestra.it",password:"operatore123",operator:{id:2,firstName:"Sara",lastName:"Rossi",email:"sara.rossi@palestra.it",role:"Operatore"}}].find(e=>e.email.toLowerCase()===r.toLowerCase()&&e.password===a);return s?(this.setCurrentUser(s.operator),new o(e=>{e.next(!0),e.complete()})):new o(e=>{e.next(!1),e.complete()})}logout(){localStorage.removeItem(this.STORAGE_KEY),this.currentUserSubject.next(null),this.router.navigate(["/auth/login"])}isAuthenticated(){return this.currentUserSubject.value!==null}isAdmin(){return this.currentUserSubject.value?.role==="Admin"}isOperator(){return this.currentUserSubject.value?.role==="Operatore"}getCurrentUser(){return this.currentUserSubject.value}setCurrentUser(r){localStorage.setItem(this.STORAGE_KEY,JSON.stringify(r)),this.currentUserSubject.next(r)}getStoredUser(){try{let r=localStorage.getItem(this.STORAGE_KEY);return r?JSON.parse(r):null}catch{return null}}static \u0275fac=function(a){return new(a||t)(l(u))};static \u0275prov=n({token:t,factory:t.\u0275fac,providedIn:"root"})};export{c as a};
