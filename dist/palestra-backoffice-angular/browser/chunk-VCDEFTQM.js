import{a as T}from"./chunk-HS4QI2UB.js";import{a as N}from"./chunk-Y5DSX2WP.js";import{b as E,c as O,d as R,e as V,f as W,g as x,i as A,j as k,k as z,m as F,n as L}from"./chunk-MOLSLK7Y.js";import{D as d,E as h,N as e,O as r,P as f,Q as w,R as S,U as t,Y as p,Z as g,_ as u,aa as y,ka as _,qa as C,ra as M,s as v,w as l,x as s}from"./chunk-GFW33JLT.js";var I=class b{constructor(c,a,i){this.router=c;this.operatorsService=a;this.authService=i}firstName="";lastName="";email="";phone="";birthdate="";gender="";role="";ngOnInit(){if(!this.authService.isAuthenticated()){this.router.navigate(["/auth/login"]);return}if(!this.authService.isAdmin()){alert("Accesso negato. Solo gli amministratori possono registrare nuovi operatori."),this.router.navigate(["/backoffice/dashboard"]);return}}onSubmit(){if(!this.firstName||!this.lastName||!this.email||!this.phone||!this.birthdate||!this.gender||!this.role){alert("Per favore compila tutti i campi obbligatori!");return}let c={firstName:this.firstName,lastName:this.lastName,email:this.email,phone:this.phone,birthdate:this.birthdate,gender:this.gender,role:this.role,status:"Attivo",registrationDate:new Date().toISOString().split("T")[0]};this.operatorsService.createOperator(c).subscribe({next:a=>{let i=`\u2713 Operatore registrato con successo!

Nome: ${this.firstName} ${this.lastName}
Email: ${this.email}
Ruolo: ${this.role}

Vuoi visualizzare la lista operatori?`;confirm(i)?this.router.navigate(["/backoffice/visualizza-operatori"]):this.resetForm()},error:a=>{console.error("Errore nella registrazione dell'operatore:",a),alert("Errore nella registrazione dell'operatore. Riprova pi\xF9 tardi.")}})}resetForm(){this.firstName="",this.lastName="",this.email="",this.phone="",this.birthdate="",this.gender="",this.role=""}toggleMenu(c,a){c.preventDefault();let i=document.getElementById(a);if(i){let o=window.bootstrap?.Collapse;if(o){let m=new o(i,{toggle:!0})}else i.classList.toggle("show")}}static \u0275fac=function(a){return new(a||b)(h(C),h(T),h(N))};static \u0275cmp=v({type:b,selectors:[["app-registra-operatore"]],standalone:!0,features:[y],decls:106,vars:7,consts:[["registerOperatorForm","ngForm"],[1,"row"],[1,"col-12"],[1,"page-title-box","d-sm-flex","align-items-center","justify-content-between"],[1,"mb-sm-0"],[1,"page-title-right"],[1,"breadcrumb","m-0"],[1,"breadcrumb-item"],["routerLink","/backoffice/dashboard"],["routerLink","/backoffice/visualizza-operatori"],[1,"breadcrumb-item","active"],[1,"col-lg-12"],[1,"card"],[1,"card-header","align-items-center","d-flex","bg-primary-subtle"],[1,"card-title","mb-0","flex-grow-1"],[1,"ri-user-settings-line","me-2"],[1,"flex-shrink-0"],["type","button","onclick","resetForm()",1,"btn","btn-soft-secondary","btn-sm"],[1,"ri-refresh-line","me-1"],[1,"card-body"],[3,"ngSubmit"],[1,"col-md-6"],[1,"mb-3"],["for","firstName",1,"form-label"],[1,"text-danger"],["type","text","id","firstName","placeholder","Inserisci il nome","name","firstName","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","lastName",1,"form-label"],["type","text","id","lastName","placeholder","Inserisci il cognome","name","lastName","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","email",1,"form-label"],["type","email","id","email","placeholder","operatore@email.com","name","email","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","phone",1,"form-label"],["type","tel","id","phone","placeholder","+39 333 123 4567","name","phone","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","birthdate",1,"form-label"],["type","date","id","birthdate","name","birthdate","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","gender",1,"form-label"],["id","gender","name","gender","required","",1,"form-select",3,"ngModelChange","ngModel"],["value",""],["value","Maschio"],["value","Femmina"],["value","Altro"],["for","role",1,"form-label"],["id","role","name","role","required","",1,"form-select",3,"ngModelChange","ngModel"],["value","Operatore"],["value","Admin"],[1,"text-muted"],[1,"text-end"],["type","button",1,"btn","btn-soft-secondary",3,"click"],["type","submit",1,"btn","btn-primary"],[1,"ri-user-settings-line","me-1"]],template:function(a,i){if(a&1){let o=w();e(0,"div",1)(1,"div",2)(2,"div",3)(3,"h4",4),t(4,"Registra Nuovo Operatore"),r(),e(5,"div",5)(6,"ol",6)(7,"li",7)(8,"a",8),t(9,"Dashboard"),r()(),e(10,"li",7)(11,"a",9),t(12,"Gestione Backoffice"),r()(),e(13,"li",10),t(14,"Registra Operatore"),r()()()()()(),e(15,"div",1)(16,"div",11)(17,"div",12)(18,"div",13)(19,"h4",14),f(20,"i",15),t(21,"Registrazione Operatore "),r(),e(22,"div",16)(23,"button",17),f(24,"i",18),t(25," Reset Form "),r()()(),e(26,"div",19)(27,"form",20,0),S("ngSubmit",function(){return l(o),s(i.onSubmit())}),e(29,"div",1)(30,"div",21)(31,"div",22)(32,"label",23),t(33,"Nome "),e(34,"span",24),t(35,"*"),r()(),e(36,"input",25),u("ngModelChange",function(n){return l(o),g(i.firstName,n)||(i.firstName=n),s(n)}),r()()(),e(37,"div",21)(38,"div",22)(39,"label",26),t(40,"Cognome "),e(41,"span",24),t(42,"*"),r()(),e(43,"input",27),u("ngModelChange",function(n){return l(o),g(i.lastName,n)||(i.lastName=n),s(n)}),r()()()(),e(44,"div",1)(45,"div",21)(46,"div",22)(47,"label",28),t(48,"Email "),e(49,"span",24),t(50,"*"),r()(),e(51,"input",29),u("ngModelChange",function(n){return l(o),g(i.email,n)||(i.email=n),s(n)}),r()()(),e(52,"div",21)(53,"div",22)(54,"label",30),t(55,"Numero di Telefono "),e(56,"span",24),t(57,"*"),r()(),e(58,"input",31),u("ngModelChange",function(n){return l(o),g(i.phone,n)||(i.phone=n),s(n)}),r()()()(),e(59,"div",1)(60,"div",21)(61,"div",22)(62,"label",32),t(63,"Data di Nascita "),e(64,"span",24),t(65,"*"),r()(),e(66,"input",33),u("ngModelChange",function(n){return l(o),g(i.birthdate,n)||(i.birthdate=n),s(n)}),r()()(),e(67,"div",21)(68,"div",22)(69,"label",34),t(70,"Sesso "),e(71,"span",24),t(72,"*"),r()(),e(73,"select",35),u("ngModelChange",function(n){return l(o),g(i.gender,n)||(i.gender=n),s(n)}),e(74,"option",36),t(75,"Seleziona"),r(),e(76,"option",37),t(77,"Maschio"),r(),e(78,"option",38),t(79,"Femmina"),r(),e(80,"option",39),t(81,"Altro"),r()()()()(),e(82,"div",1)(83,"div",21)(84,"div",22)(85,"label",40),t(86,"Ruolo "),e(87,"span",24),t(88,"*"),r()(),e(89,"select",41),u("ngModelChange",function(n){return l(o),g(i.role,n)||(i.role=n),s(n)}),e(90,"option",36),t(91,"Seleziona ruolo"),r(),e(92,"option",42),t(93,"Operatore"),r(),e(94,"option",43),t(95,"Admin"),r()(),e(96,"small",44),t(97,"Seleziona il ruolo dell'operatore. L'Admin ha accesso completo a tutte le funzionalit\xE0."),r()()()(),e(98,"div",1)(99,"div",11)(100,"div",45)(101,"button",46),S("click",function(){return l(o),s(i.resetForm())}),t(102,"Annulla"),r(),e(103,"button",47),f(104,"i",48),t(105," Registra Operatore "),r()()()()()()()()()}a&2&&(d(36),p("ngModel",i.firstName),d(7),p("ngModel",i.lastName),d(8),p("ngModel",i.email),d(7),p("ngModel",i.phone),d(8),p("ngModel",i.birthdate),d(7),p("ngModel",i.gender),d(16),p("ngModel",i.role))},dependencies:[_,M,L,x,k,z,E,A,O,R,F,W,V]})};export{I as RegistraOperatoreComponent};
